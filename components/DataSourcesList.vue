<template>
  <v-container>
    <v-row>
      <v-col cols="12">
        <v-chip-group
          v-model="selectedTheme"
          column
        >
          <v-chip
            v-for="theme in themes"
            :key="theme.id"
            class="text-capitalize"
            filter
            outlined
            color="bf500"
          >
            {{ theme.text }}
          </v-chip>
        </v-chip-group>
      </v-col>
    </v-row>
    <!-- <v-row v-for="(sources, theme) in filteredThemes" :key="theme">
      <v-col cols="12">
        <h2 class="text-h2">
          {{ theme }}
        </h2>
      </v-col>
      <v-col v-for="(source, i) in sources" :key="`${theme}-${i}-${source.title}`" cols="12" sm="6" md="4">
        <DataSourceCard :source="source" :region="region" />
      </v-col>
    </v-row> -->
  </v-container>
</template>

<script>
import { groupBy } from 'lodash'

export default {
  props: {
    region: {
      type: String,
      default: ''
    },
    dataSources: {
      type: Array,
      default () { return [] }
    },
    themes: {
      type: Array,
      default () { return [] }
    }
  },
  data () {
    return {
      selectedTheme: ''
    }
  },
  // async fetch () {
  //   this.dataSources = await this.$content('Data', {
  //     deep: true
  //   }).fetch()
  // },
  computed: {
    // themes () {
    //   return groupBy(this.dataSources, source => source.theme)
    // },
    // themesKeys () {
    //   return Object.keys(this.themes).filter(k => k)
    // },
    filteredThemes () {
      const filterredSources = this.dataSources.filter((source) => {
        return this.selectedTheme ? (source.theme.id === this.selectedTheme) : true
      })

      return groupBy(filterredSources, (source) => {
        return source.theme.text
      })

      // const selectedKey = this.themesKeys[this.selectedTheme]

      // if (selectedKey) {
      //   const theme = {}

      //   theme[selectedKey] = this.themes[selectedKey]

      //   return theme
      // } else {
      //   return this.themes
      // }
    }
  }
}
</script>
